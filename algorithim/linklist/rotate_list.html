
<script type="text/javascript">

function print(node) {
  var str = '';
  while (node !== null) {
    str = str + (node.val) + (node.next ? "->" : "");
    node = node.next;
  }
  console.log(str);
}

function ListNode(val) {
  this.val = val;
  this.next = null;
}

var node1 = new ListNode(1);
var node2 = new ListNode(2);
var node3 = new ListNode(3);
var node4 = new ListNode(4);
var node5 = new ListNode(5);
var node6 = new ListNode(6);




node1.next = node2;
node2.next = node3;
node3.next = node4;
node4.next = node5;
node5.next = node6;


head = node1;

print(head);
// 1->2->3
node1 = node2;

print(head);
// 1->2->3


//get the nth element of the list
function getNth(node, n) {
  for (var i = 1; i < n; i++) {
    //run n - 1 times

    //each time, jump once
    node = node.next;
  }

  //supporse the starting node is ith
  //the ending node is (i + n - 1)th node
  return node;
}

console.log(getNth(head, 5));

var rotateRight = function(head, k) {
    if (head === null) {
        return head;
    }
    
    prev = null;
    curr = head;
    while (curr !== null) {
        var next = curr.next;
        curr.next = prev;
        prev = curr;
        curr = next;
    }

    var temphead = prev;
    prev = null;
    curr = temphead;
    // print(prev)
    for (i = 1; i <= k; i++) {
        var next = curr.next;
        curr.next = prev;
        prev = curr;
        curr = next;
    }

    console.log('prev', prev); //5
    console.log('temphead',temphead);
    console.log('curr', curr); //4
    var newhead = prev;
    prev = null;
    while (curr !== null) {
      var next = curr.next;
      curr.next = prev;
      prev = curr;
      curr = next;
    }
    console.log(prev);
    temphead.next = prev;
    print(newhead);
    return newhead;

};

var rotateRight = function(head, k) {
    if (head === null) {
        return head;
    }
    
    var length = getLength(head);
    k = k % length;
    
    /*
    get the prev of rotate-> new tail
    get the start of rotate-> new head
    get the endoforiginal & headoforiginal
    endofororiginal.next = headoforiginal
    
    we have head of original
    which means we have to get the prev of rotate(which .next = startoforiginal && endoforiginal)
    
    endoforignal - prevofrotate = k 
    endoforiginal - startofrotate = k - 1 (because we include endoforginal)
    */



    //let's do one loop
    // var tail = head;
    // var curr = head;
    // var dummy = new ListNode(0);
    // dummy.next = head;
    // curr = dummy;
    // var tail = dummy;
    // //now tail and head are at 0 position
 
    // for (var i = 0; i < k; i++) {
    //     curr = curr.next;
    // }

    // //curr = prevhead, tail = prevhead

    // //curr - tail = k could be 0
    // while (curr.next !== null) {
    //     curr = curr.next;
    //     tail = tail.next;
    // }


    // curr.next = dummy.next;

    // // console.log(curr);

    // dummy.next = tail.next;

    // console.log(dummy)
    // tail.next = null;

    // return dummy.next;

    var currHead = head;
    var tail = head;
    var curr = head;
    for (i = 0; i < k; i++) {
      curr = curr.next;
    }
    while (curr.next !== null) {
      curr = curr.next;
      tail  = tail.next;
    }


    curr.next = currHead;
    var newhead = tail.next;
    tail.next = null;
    return newhead;

};

var getLength = function(head) {
    if (head === null) {
        return 0;
    }
    var length = 0;
    while(head !== null) {
        head = head.next;
        length++;
    }
    return length;
}



var head = rotateRight(new ListNode(1), 0);
print(head);
console.log(head);




</script>
