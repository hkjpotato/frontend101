<html>
    <div id="app"></div>

    <!-- babel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.js"></script>
    <!-- react -->
    <script src="https://unpkg.com/react@15/dist/react.js"></script>
    <!-- react-dom -->
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script>

    <script type="text/babel">
        //React use composition instead of inheritance in ood.

        //The idea of inheritance is the share common feature. Dog, and Cat are both Animal.

        //Composition let use reuse the code as well.


        /*
            Some componenets don't know their children ahead of time. This is especially common for components for container component like Sidebar.

            In this case, use special children prop to pass children elements directly into their output. What does it mean?
        */


        const container = React.createElement('div', null, 'hello');
        //hello is the 'children' prop
        // console.log(container.props.children);


        //similarly, for a functional component
        function FancyBorder(props) {
            const ele_in = React.createElement(
                'div', 
                {
                    className: 'FancyBorder FancyBorder-' + props.color
                },
                props.children
            );
            console.log(ele_in);
            return ele_in;
        }

        var children_props = 'this is the children'; 

        const ele_out = React.createElement(FancyBorder, {color: 'red'}, children_props);

        // console.log(ele_out); //{color: 'red', children: children_props}

        /*
        The difference between ele_out & ele_in is 
        1. Their types are different, ele_out is a function, FancyBorder, ele_in is 'div'.
        2. FancyBorder will be called when ReactDOM render it, at that time ReactDOM will use it to get the actual ReactElement using the passed in props.
        3. For ele_in, we have to be careful about its children props:
            * every element is created by React.createElement and thus the third parameter will be assigned to its props.children
            * an element can be generated by a Component function, or a class, which will accepts a list of arguments. This arguments is passed by React.createElement(Component, param2, param3). The arguments, or props passed in from the parent component can be used to as its own props.


        Similarity between ele_out & ele_in
        they both use children_props as the props.children (same reference)
        */

        function FixedContentContainer (props) {
            return <div>Content Fixed</div>;
        }

        function DynamicContentContainer (props) {
            return <div>{props.children}</div>;
        }

        //children is just a way of passed in props(as third param), you can use the second param to pass more props. you can even pass element as props.

        //react jsx code in es6
        // ReactDOM.render(
        //     <DynamicContentContainer>hello</DynamicContentContainer>,
        //     document.getElementById('app')
        // );
        
        //Special Case, just return children.. so crazy
        function GiveMeChildren(props) {
          console.log(props.children);
          return props.children;
        }

        // ReactDOM.render(
        //     <GiveMeChildren><h1>hello</h1></GiveMeChildren>,
        //     document.getElementById('app')
        // );
        //Specialization, in React, this is also achieved by composition
        function Dialog(props) {
          return (
            <FancyBorder color="blue">
              <h1 className="Dialog-title">
                {props.title}
              </h1>
              <p className="Dialog-message">
                {props.message}
              </p>
            </FancyBorder>
          );
        }

        function WelcomeDialog() {
          return (
            <Dialog
              title="Welcome"
              message="Thank you for visiting our spacecraft!" />
          );
        }


        //consider the difference between the two cases

        //case 1

        const makeElement = React.createElement;

        class MaMa extends React.Component {
          render() {
            console.log('MaMa render');
            //every MaMa renders make a new Child element right here
            // return (
            //   <div>
            //     <Child />
            //   </div>
            // )
            const _child = makeElement(
                Child,
                null,
                null
              );
            return makeElement(
              'div',
              null,
              _child
            )
          }
        }

        class Child extends React.Component {
          render() {
            const _myEle = makeElement('div', null, 'child');
            return _myEle;
          }
        }

        //case 2 
        class PaPa extends React.Component {
          render() {
            //every PaPa renders only render the props.children passed in, no control over it
            // return (
            //   <div>
            //     {props.children}
            //   </div>
            // )
            return makeElement(
              'div',
              null,
              this.props.children
            )
          }
        }

        //https://stackoverflow.com/questions/32370994/how-to-pass-props-to-this-props-children

        


    </script>
    </script>
</html>