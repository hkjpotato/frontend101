<!DOCTYPE html>
<!-- saved from url=(0049)https://oreilly.janrainsso.com/static/server.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body>
<script type="text/javascript" src="json2-min.js"></script>
<script type="text/javascript">

(function(){function k(){return x+(0<d.length?"__"+d:"")}function l(){return C+(0<d.length?"__"+d:"")}function m(){return s+(0<d.length?"__"+d:"")}function q(){return D+(0<d.length?"__"+d:"")}function y(b){var a=new Date("1980-01-01T00:00:00Z");"1980-01-01T00:00:00Z"===d&&g(a);return new Date(b)}function u(b){var a=new Date,c=n(l());if(c){if("session"!==c){var r=y(c);a.getTime()>r.getTime()&&(e(k()),e(l()))}}else e(k()),e(l());var c=n(k()),d=n(q());d?"session"!==d&&(r=y(d),a.getTime()>r.getTime()&&
(e(m()),e(q()))):(e(m()),e(q()));a=n(m());return{messageId:b.messageId,action:b.action,key:b.key,storedValue:{session_id:c,visited:a,visited_expires:d}}}function v(b){var a={action:""},c={};try{a=JSON.parse(b.data)}catch(r){window.console&&window.console.warn&&console.warn(r.message)}a.key&&0<a.key.length&&(d=a.key);switch(a.action){case "set":a.storedValue.host&&p(z+a.storedValue.host,a.key);a.storedValue.session_id&&"deleteMe"!==a.storedValue.session_id?p(k(),a.storedValue.session_id):"deleteMe"===
a.storedValue.session_id&&e(k());a.storedValue.session_id_expires&&"deleteMe"!==a.storedValue.session_id_expires?p(l(),a.storedValue.session_id_expires):"deleteMe"===a.storedValue.session_id_expires&&e(l());a.storedValue.visited&&p(m(),a.storedValue.visited);a.storedValue.visited_expires&&p(q(),a.storedValue.visited_expires);c=u(a);break;case "remove":c=u(a);e(k());e(l());e(m());e(q());break;case "get":c=u(a);break;case "getSegment":(d=n(z+a.key))||(d="");c={messageId:a.messageId,action:a.action,
key:a.key,storedValue:{segment:d}};break;case "deleteSession":E();F();p(m(),a.storedValue.visited);c={messageId:a.messageId,action:a.action,key:a.key,storedValue:{}};break;case "getAllVisited":var h=JSON.stringify(G()),c={messageId:a.messageId,action:a.action,key:a.key,storedValue:{allVisited:h}}}if(t)b.source.postMessage(JSON.stringify(c),b.origin);else{var f={},g;for(g in b)f[g]=b[g];setTimeout(function(){t=!0;f.source.postMessage(JSON.stringify(c),f.origin)},1E3)}}function E(){var b=f.keys(),a;
for(a in b)-1<a.indexOf(x)&&e(a)}function F(){var b=f.keys(),a;for(a in b)-1<a.indexOf(s)&&e(a)}function G(){var b=[],a=f.keys(),c;for(c in a)if(c===s||-1<c.indexOf(s+"__"))try{b=b.concat(JSON.parse(n(c)))}catch(d){}return b}function e(b){"undefined"!==typeof document.onstoragecommit&&(t=!1,document.onstoragecommit=function(){t=!0});f.removeItem(b)}function n(b){return f.getItem(b)}function p(b,a){f.setItem(b,a)}function g(b){window.console&&window.console.log&&window.console.log(b)}function w(b,
a,c,d,e,f){b=b+"\x3d"+escape(a);c&&(c=(new Date((new Date).getTime()+864E5*c)).toGMTString(),b+=";expires\x3d"+c);d&&(b+=";path\x3d"+d);e&&(b+=";domain\x3d"+e);f&&(b+="secure; ");document.cookie=b}function A(){var b=!1,a=navigator.userAgent;if(-1!=a.indexOf("Safari")){var c=a.indexOf("Version");if(-1!=c)var a=a.substring(c+8),d=parseInt(""+a,10);5<d&&(b=!0)}return b}var x="janrainSSO_session_id",C="janrainSSO_session_id_expires",s="janrainSSO_visited",D="janrainSSO_visited_expires",z="janrainSSO_host_",
d="",t=!0;if(A()){var h=location.search.split("\x3d")[1];g("origin\x3d"+h);h&&(h=decodeURIComponent(h),window.location=h+location.hash,w("safariWorkAround",navigator.userAgent,7300,"/"))}h=function(){};h.prototype={getItem:function(b){cName="";pCOOKIES=[];pCOOKIES=document.cookie.split("; ");for(bb=0;bb<pCOOKIES.length;bb++)NmeVal=[],NmeVal=pCOOKIES[bb].split("\x3d"),NmeVal[0]==b&&(cName=unescape(NmeVal[1]));1<cName.length&&('"'===cName[0]&&(cName=cName.substr(1,cName.length)),'"'===cName[cName.length-
1]&&(cName=cName.substr(0,cName.length-1)));return cName.replace(/\\"/g,'"')},setItem:function(b,a){w(b,a,365,"/")},removeItem:function(b){w(b,"",-1,"/")},keys:function(){for(var b=document.cookie.split("; "),a={},c=0;c<b.length;c++){var d=b[c].split("\x3d");a[d[0]]=unescape(d[1])}return a}};var B=function(){};B.prototype={getItem:function(b){return window.localStorage.getItem(b)},setItem:function(b,a){window.localStorage.setItem(b,a)},removeItem:function(b){window.localStorage.removeItem(b)},keys:function(){return window.localStorage}};
var f;f=A()?new h:new B;window.addEventListener?(g("Setting up event listener 1 remote"),window.addEventListener("message",v,!1)):window.attachEvent?(g("Setting up event listener 2 remote"),window.attachEvent("onmessage",v)):document.attachEvent?(g("Setting up event listener 3 remote"),document.attachEvent("onmessage",v)):g("Failed to setup an event listener")})();

</script>


</body></html>